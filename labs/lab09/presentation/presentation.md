---
## Front matter
lang: ru-RU
title: Лабораторная работа №9
subtitle: Презентация
author:
 - Устинова В. В.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 31 октября 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Устинова Виктория Вадимовна
  * студент НПИбд-01-24
  * Российский университет дружбы народов


:::
::: {.column width="30%"}



:::
::::::::::::::


## Цель работы

Получить навыки работы с контекстом безопасности и политиками SELinux.

## Задание

1. Продемонстрируйте навыки по управлению режимами SELinux (см. раздел 9.4.1).
2. Продемонстрируйте навыки по восстановлению контекста безопасности SELinux (см.
раздел 9.4.2).
3. Настройте контекст безопасности для нестандартного расположения файлов веб-
службы (см. раздел 9.4.3).
4. Продемонстрируйте навыки работы с переключателями SELinux (см. раздел 9.4.4).

## Управление режимами SELinux

Просмотрите текущую информацию о состоянии SELinux

![переходим в андмин. и смотрим информацию, селинукс активен и работает нормально](image/1.jpg){#fig:001 width=70%}

## Управление режимами SELinux

Посмотрите, в каком режиме работает SELinux, измените режим работы SELinux на разрешающий (Permissive)

![SELinux работает в режиме enforcing, мы переключили его на Permissive](image/2.jpg){#fig:002 width=70%}

## Управление режимами SELinux

В файле /etc/sysconfig/selinux с помощью редактора установите  disabled

![заменяем enforcing на disabled и перезапускаем систему](image/3.jpg){#fig:003 width=70%}

## Управление режимами SELinux

После перезагрузки, посмотрите статус SELinux, попробуйте переключить режим работы SELinux

![Статус стал: disabled, не удается перкключить на режим работы потому что она отключена](image/4.jpg){#fig:004 width=70%}

## Управление режимами SELinux

Откройте файл /etc/sysconfig/selinux с помощью редактора и установите enforcing

![Снова меняем, только теперь на enforcing](image/5.jpg){#fig:005 width=70%}

## Управление режимами SELinux

После перезагрузки, убедитесь, что система работает в принудительном режиме (enforcing) использования SELinux.

![Она активна и работает в принудительном режиме все верно](image/6.jpg){#fig:006 width=70%}

## Использование restorecon для восстановления контекста безопасности

Посмотрите контекст безопасности файла /etc/hosts, Скопируйте файл /etc/hosts в домашний каталог, Проверьте контекст файла ~/hosts

![у файла есть метка контекста net_conf_t., после копирования(что считается созданием нового файла) контекст стал admin_home_t.](image/7.jpg){#fig:007 width=70%}

## Использование restorecon для восстановления контекста безопасности

Попытайтесь перезаписать существующий файл hosts из домашнего каталога в каталог /etc, убедитесь, что тип контекста по-прежнему установлен на admin_home_t

![Поддтвержаем перезаписывание файла и тип контекста все еще admin_home_t](image/8.jpg){#fig:008 width=70%}

## Использование restorecon для восстановления контекста безопасности

Исправьте контекст безопасности, убедитесь, что тип контекста изменился, для массового исправления контекста безопасности на файловой системе введите

![Опция -v показывает процесс изменения, тип контекста изменился на net_conf_t, вводим команду и перезапускаем машину](image/9.jpg){#fig:009 width=70%}

## Использование restorecon для восстановления контекста безопасности

Во время перезапуска не забудьте нажать клавишу Esc на
клавиатуре, чтобы вы видели загрузочные сообщения

![нажимаем esc во время перезапуска и видим, что система перемаркированна автоматически](image/10.jpg){#fig:010 width=70%}

## Настройка контекста безопасности для нестандартного расположения файлов веб-сервера

Создайте новое хранилище для файлов web-сервера, создайте файл index.html в каталоге с контентом веб-сервера, и поместите туда: Welcome to my web-server

![создаем новое хранилище, переходим туда и создаем файл, через редактор nano добавляем туда строчку](image/11.jpg){#fig:011 width=70%}

## Настройка контекста безопасности для нестандартного расположения файлов веб-сервера

В файле /etc/httpd/conf/httpd.conf закомментируйте строку
DocumentRoot "/var/www/html" и ниже добавьте строку

![Комментируем строчку и добавляем ниже:DocumentRoot "/web", также ниже комментируем целый раздел и вместо него пишем другое](image/12.jpg){#fig:012 width=70%}

## Настройка контекста безопасности для нестандартного расположения файлов веб-сервера

Запустите веб-сервер и службу httpd, в терминале под учётной записью своего пользователя при обращении к веб-серверу в текстовом браузере lynx, вы увидите веб-страницу Red Hat по умолчанию, а не содержимое только что созданного файла index.html

![Мы открыли файл и вышли из него](image/13.jpg){#fig:013 width=70%}

## Настройка контекста безопасности для нестандартного расположения файлов веб-сервера

В терминале с полномочиями администратора примените новую метку контекста к /web, восстановите контекст безопасности

![Проделали все действия, и презагружаем машину](image/14.jpg){#fig:014 width=70%}

## Настройка контекста безопасности для нестандартного расположения файлов веб-сервера

Теперь вы получите доступ к своей пользовательской веб-странице.В случае успеха на экране должна быть отображена
запись «Welcome to my web-server»

![Открываем и смотрим, у нас все получилось!](image/15.jpg){#fig:015 width=70%}

## Работа с переключателями SELinux

Посмотрите список переключателей SELinux для службы ftp, Вы увидите переключатель ftpd_anon_write с текущим значением off, для службы ftpd_anon посмотрите список переключателей 

![Видим что все переключатели выключены](image/16.jpg){#fig:016 width=70%}

## Работа с переключателями SELinux

Измените текущее значение переключателя для службы ftpd_anon_write с off на on, овторно посмотрите список переключателей SELinux для службы ftpd_anon_write, посмотрите список переключателей с пояснением

![Настройка времени выполнения включена, но постоянная настройка по-прежнему отключена.](image/17.jpg){#fig:017 width=70%}

## Работа с переключателями SELinux

Измените постоянное значение переключателя для службы ftpd_anon_write с off на on, посмотрите список переключателей

![Теперь все включено, переключатели разрешают анонимную запись на FTP сервер через селинукс](image/18.jpg){#fig:018 width=70%}

## Выводы

Мы успешно получили навыки работы с контекстом безопасности и политиками SELinux.

